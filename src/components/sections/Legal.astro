---
interface LegalSection {
    title: string;
    content: string[];
}

const legalSections: LegalSection[] = [
    {
        title: "1. Éditeur du site",
        content: [
            "Nom de la société / Nom de l'entrepreneur : MR MASSAGES ANIMALIERS / Morgane RIEHL",
            "Statut juridique : Micro-entrepreneur",
            "Siège social : Pierre-levée, 77580",
            "Numéro de téléphone : 06.87.93.34.16",
            "Email : mr_massages.animaliers@yahoo.com",
            "Numéro SIRET : 98007417300017",
            "Numéro RCS : 980074173",
            "TVA : Non applicable, article 293 B du CGI (franchise en base de TVA)",
            "Assurance responsabilité civile professionnelle : AXA France",
            "Adresse de l'assureur : 8-10, rue Paul Vaillant Couturier, 92240 Malakoff",
            "Couverture géographique : Monde entier",
            "Directeur de publication : RIEHL Morgane",
        ],
    },
    {
        title: "2. Hébergeur du site",
        content: [
            "Nom de l'hébergeur : Vercel Inc.",
            "Adresse de l'hébergeur : 340 S Lemon Ave #4133, Walnut, CA 91789, United States",
            "Site web : https://vercel.com",
        ],
    },
    {
        title: "3. Propriété intellectuelle",
        content: [
            "L'ensemble du contenu de ce site (textes, images, vidéos, logos) est la propriété exclusive de MR MASSAGES ANIMALIERS.",
            "Toute reproduction, représentation, modification ou adaptation, totale ou partielle, est strictement interdite sans l'autorisation écrite préalable de Morgane RIEHL.",
        ],
    },
    {
        title: "4. Politique de confidentialité et protection des données (RGPD)",
        content: [
            "Responsable du traitement : Morgane RIEHL - MR MASSAGES ANIMALIERS",
            "Données collectées via le formulaire de contact : nom, prénom, adresse email, numéro de téléphone (optionnel), type d'animal, et message.",
            "Finalité de la collecte : Traiter vos demandes de contact et vous répondre dans les meilleurs délais.",
            "Base légale : Consentement lors de la soumission du formulaire.",
            "Destinataires des données : Morgane RIEHL uniquement. Vos données ne sont jamais transmises à des tiers.",
            "Durée de conservation : Les données sont conservées pendant 3 ans à compter de votre dernier contact.",
            "Données techniques : Ce site utilise le stockage local du navigateur (localStorage) uniquement pour éviter le spam du formulaire. Cette donnée reste sur votre appareil et n'est jamais transmise.",
            "Vos droits : Conformément au RGPD, vous disposez d'un droit d'accès, de rectification, de suppression, d'opposition et de limitation du traitement de vos données personnelles.",
            "Exercice de vos droits : Pour exercer ces droits, contactez-nous par email à mr_massages.animaliers@yahoo.com",
            "Réclamation : Vous avez également le droit de déposer une réclamation auprès de la CNIL (www.cnil.fr).",
        ],
    },
    {
        title: "5. Cookies et traceurs",
        content: [
            "Ce site n'utilise aucun cookie de suivi, cookie publicitaire ou cookie analytique.",
            "Seul le stockage local du navigateur (localStorage) est utilisé pour mémoriser temporairement la date de votre dernière soumission de formulaire afin d'éviter les envois multiples abusifs. Cette donnée reste sur votre appareil et est supprimée automatiquement.",
        ],
    },
    {
        title: "6. Responsabilité",
        content: [
            "Les informations présentes sur ce site sont fournies à titre indicatif et peuvent être modifiées sans préavis.",
            "MR MASSAGES ANIMALIERS ne saurait être tenue responsable des erreurs, omissions ou résultats obtenus suite à l'utilisation de ces informations.",
            "L'utilisateur est seul responsable de l'utilisation qu'il fait des informations présentes sur ce site.",
        ],
    },
    {
        title: "7. Droit applicable et juridiction",
        content: [
            "Le présent site et ses mentions légales sont soumis au droit français.",
            "En cas de litige, et à défaut de résolution amiable, les tribunaux français seront seuls compétents.",
        ],
    },
];
---

<!-- Modal -->
<div id="legalModal" class="modal" role="dialog" aria-modal="true" aria-labelledby="legalModalTitle">
    <div class="modal-content">
        <div class="modal-header">
            <h2 id="legalModalTitle">Mentions légales</h2>
            <button id="closeLegalModal" class="close-button" aria-label="Fermer les mentions légales">✕</button>
        </div>

        <div class="modal-body">
            {
                legalSections.map((section) => (
                    <section class="legal-section">
                        <h2>{section.title}</h2>
                        <div class="section-content">
                            {section.content.map((text) => (
                                <p>{text}</p>
                            ))}
                        </div>
                    </section>
                ))
            }
        </div>
    </div>
</div>

<style>
    .modal {
        display: none;
        position: fixed;
        z-index: 1000;
        left: 0;
        top: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.5);
        backdrop-filter: blur(4px);
        align-items: center;
        justify-content: center;
        padding: 1rem;
    }

    .modal.active {
        display: flex;
    }

    .modal-content {
        background: var(--secondary-color);
        border-radius: 8px;
        max-width: 800px;
        width: 100%;
        max-height: 90vh;
        overflow: hidden;
        box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
        display: flex;
        flex-direction: column;
    }

    .modal-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 2rem 2.5rem;
        border-bottom: 2px solid var(--primary-color);
        background: white;
    }

    .modal-header h1 {
        color: var(--primary-color);
        font-size: 1.75rem;
        margin: 0;
        font-family: "Playfair Display", serif;
    }

    .close-button {
        background: none;
        border: none;
        font-size: 1.5rem;
        color: var(--text-light);
        cursor: pointer;
        padding: 0;
        width: 32px;
        height: 32px;
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: 4px;
        transition: all 0.3s ease;
    }

    .close-button:hover {
        background: var(--border-color);
        color: var(--text-dark);
    }

    .modal-body {
        overflow-y: auto;
        padding: 2.5rem;
    }

    .legal-section {
        padding-bottom: 2rem;
        margin-bottom: 2rem;
        border-bottom: 1px solid rgba(120, 84, 68, 0.1);
    }

    .legal-section:last-child {
        border-bottom: none;
        margin-bottom: 0;
        padding-bottom: 0;
    }

    .legal-section h2 {
        font-size: 1.25rem;
        font-weight: 600;
        margin-bottom: 1rem;
        color: var(--primary-color);
        font-family: "Playfair Display", serif;
    }

    .section-content {
        display: flex;
        flex-direction: column;
        gap: 0.5rem;
    }

    .section-content p {
        color: rgba(120, 84, 68, 0.8);
        line-height: 1.7;
        font-size: 0.95rem;
        margin: 0;
    }

    @media (max-width: 768px) {
        .modal-header {
            padding: 1.5rem;
        }

        .modal-header h1 {
            font-size: 1.5rem;
        }

        .modal-body {
            padding: 1.5rem;
        }

        .legal-section h2 {
            font-size: 1.1rem;
        }

        .section-content p {
            font-size: 0.9rem;
        }
</style>

<script is:inline>
    function initLegalModal() {
        const modal = document.getElementById("legalModal");
        const openBtns = document.querySelectorAll("[data-open-legal]");
        const closeBtn = document.getElementById("closeLegalModal");

        if (!modal || !closeBtn) return;

        openBtns.forEach((btn) => {
            btn.addEventListener("click", (e) => {
                e.preventDefault();
                modal.classList.add("active");
            });
        });

        closeBtn.addEventListener("click", () => {
            modal.classList.remove("active");
        });

        modal.addEventListener("click", (e) => {
            if (e.target === modal) {
                modal.classList.remove("active");
            }
        });
    }

    if (document.readyState === "loading") {
        document.addEventListener("DOMContentLoaded", initLegalModal);
    } else {
        initLegalModal();
    }
</script>
